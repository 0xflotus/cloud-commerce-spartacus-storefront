<div *ngIf="(user$ | async); else userLoading">
  <div *ngIf="(loading$ | async); else updateForm">
    <div class="cx-spinner">
      <cx-spinner></cx-spinner>
    </div>
  </div>

  <ng-template #updateForm>
    <div [formGroup]="form">
      <select formControlName="titleCode" class="form-control">
        <option value="">None</option>
        <option *ngFor="let title of (titles$ | async)" [value]="title.code">{{
          title.name
        }}</option>
      </select>
      <input type="text" formControlName="firstName" />
      <input type="text" formControlName="lastName" />
      <button type="submit" (click)="onSubmit()">Submit</button>
    </div>
  </ng-template>
</div>

<ng-template #userLoading>
  <div class="cx-spinner">
    <cx-spinner></cx-spinner>
  </div>
</ng-template>

<div>Loading: {{ loading$ | async }}</div>
<div>Error: {{ error$ | async }}</div>
<div>Success: {{ success$ | async }}</div>

<div>{{ form.value | json }}</div>
